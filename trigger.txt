USE SpatialDB
GO
CREATE TRIGGER InsertPMData
ON dbo.[AirPollutionPM25]
AFTER INSERT
AS
BEGIN
DECLARE
@ID int,
@Latitude float,
@Longtitude float
SELECT @ID= INSERTED.[ID],
@Latitude= INSERTED.[Latitude],
@Longtitude= INSERTED.[Longtitude] FROM INSERTED
IF EXISTS(SELECT * FROM dbo.AirPollutionPM25 WHERE ID=@ID)
	BEGIN
		UPDATE dbo.AirPollutionPM25 SET geom=geometry::Point(@Latitude,@Longtitude,4326) WHERE ID=@ID
	END
END